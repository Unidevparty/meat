<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_nexus_admin_purchases extends \\IPS\\Theme\\Template\n{\n\tpublic $cache_key = 'ed3c64ff19a712915835e09395045125';\n\tfunction advertisement( $purchase, $advertisement ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class=\"ipsGrid ipsPad_half ipsType_center ipsSpacer_bottom\">\n\t<div class=\"ipsGrid_span6\">\n\t\t<span class=\"ipsType_veryLarge\">\nCONTENT;\n$return .= htmlspecialchars( $advertisement->impressions, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $advertisement->maximum_unit == 'i' and $advertisement->maximum_value != -1 ):\n$return .= <<<CONTENT\n \/ \nCONTENT;\n$return .= htmlspecialchars( $advertisement->maximum_value, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/span>\n\t\t<br>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'impressions', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/div>\n\t<div class=\"ipsGrid_span6\">\n\t\t<span class=\"ipsType_veryLarge\">\nCONTENT;\n$return .= htmlspecialchars( $advertisement->clicks, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $advertisement->maximum_unit == 'c' and $advertisement->maximum_value != -1 ):\n$return .= <<<CONTENT\n \/ \nCONTENT;\n$return .= htmlspecialchars( $advertisement->maximum_value, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/span>\n\t\t<br>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'clicks', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\n<div class=\"ips\nCONTENT;\n\n$return .= htmlspecialchars( mb_ucfirst(\\IPS\\SUITE_UNIQUE_KEY), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n ipsAreaBackground_reset ipsType_center\">\n\t\nCONTENT;\n\n$images = array_filter( json_decode( $advertisement->images, TRUE ) );\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\n$link = \\IPS\\Http\\Url::external( $advertisement->link )->makeSafeForAcp();\n$return .= <<<CONTENT\n\n\t\n\t\nCONTENT;\n\nif ( \\count( $images ) > 1 ):\n$return .= <<<CONTENT\n\n\t\t<div class='ipsTabs ipsClearfix acpFormTabBar' id='elTabs_adView' data-ipsTabBar data-ipsTabBar-contentArea='#ipsTabs_content_adView' data-ipsTabBar-updateURL='false'>\n\t\t\t<a href='#elTabs_adView' data-action='expandTabs'><i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t<ul role='tablist'\n\t\t\t\t\nCONTENT;\n\nforeach ( $images as $key => $image ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href='#ipsTabs_elTabs_adView_adView_tab_\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_panel' id='adView_tab_\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class=\"ipsTabs_item \nCONTENT;\n\nif ( $key == \"large\" ):\n$return .= <<<CONTENT\nipsTabs_activeItem\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" title='\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' role=\"tab\" aria-selected=\"\nCONTENT;\n\nif ( $key == \"large\" ):\n$return .= <<<CONTENT\ntrue\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nfalse\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $key === 'large' ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ad_image', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n\n$val = \"ad_image_{$key}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t<section id='ipsTabs_content_adView' class='acpFormTabContent'>\n\t\t\t\nCONTENT;\n\nforeach ( $images as $key => $image ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div id='ipsTabs_elTabs_adView_adView_tab_\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_panel' class=\"ipsTabs_panel\" aria-labelledby=\"adView_tab_\nCONTENT;\n$return .= htmlspecialchars( $key, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" aria-hidden=\"false\">\n\t\t\t\t\t<div class=\"ipsPad\">\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $link, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" target='_blank' rel='nofollow noopener'><img src=\"\nCONTENT;\n\n$return .= \\IPS\\File::get( $advertisement->storageExtension(), $image )->url;\n$return .= <<<CONTENT\n\" class=\"ipsImage ipsContained\"><\/a>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/section>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsPad\">\n\t\t\t\nCONTENT;\n\nforeach ( $images as $key => $image ):\n$return .= <<<CONTENT\n\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $link, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" target='_blank' rel='nofollow noopener'><img src=\"\nCONTENT;\n\n$return .= \\IPS\\File::get( $advertisement->storageExtension(), $image )->url;\n$return .= <<<CONTENT\n\" class=\"ipsImage ipsContained\"><\/a>\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<div class=\"ipsType_small\"><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $link, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $advertisement->link, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a><\/div>\n\t&nbsp;\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction domain( $whois ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<h2 class='acpBlock_title acpBlock_titleDark acpBlock_titleSmall'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'domain_whois', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n<div class=\"ipsAreaBackground_light ipsPad\">\n\t\nCONTENT;\n\nforeach ( $whois as $record ):\n$return .= <<<CONTENT\n\n\t\t<pre>\nCONTENT;\n$return .= htmlspecialchars( $record, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/pre>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction giftVoucher( $purchase, $data ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsPad ipsAreaBackground_light'>\n\t<div class='ipsColumns'>\n\t\t<div class='ipsColumn ipsColumn_wide'>\n\t\t\t<h2 class='ipsType_minorHeading'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'gift_voucher', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t<p class='ipsType_reset ipsType_large cNexusGiftCardPrice'>\n\t\t\t\t\nCONTENT;\n\n$return .= new \\IPS\\nexus\\Money( $data['amount'], $data['currency'] );\n$return .= <<<CONTENT\n\n\t\t\t<\/p>\t\n\t\t\t<div class='ipsType_large'>\n\t\t\t\t<strong>\nCONTENT;\n$return .= htmlspecialchars( $data['code'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t<\/div>\n\t\t\t<p class='ipsType_medium'>\n\t\t\t\t\nCONTENT;\n\nif ( $data['method'] === 'email' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'sent_to', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n$return .= htmlspecialchars( $data['recipient_email'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href='\nCONTENT;\n$return .= htmlspecialchars( $purchase->url()->setQueryString( 'do', 'extra' ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'printable_version', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/p>\n\t\t<\/div>\n\t\t<div class='ipsColumn ipsColumn_fluid ipsAreaBackground_reset'>\n\t\t\t<div class='ipsPad ipsType_medium'>\n\t\t\t\t\nCONTENT;\n\nif ( $data['recipient_name'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<strong>\nCONTENT;\n$return .= htmlspecialchars( $data['recipient_name'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n,<\/strong>\n\t\t\t\t\t<br>\n\t\t\t\t\t<br>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $data['message'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= nl2br( htmlspecialchars( $data['message'], ENT_DISALLOWED, 'UTF-8', FALSE ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $data['sender'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<br><br>\n\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'from', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n \nCONTENT;\n$return .= htmlspecialchars( $data['sender'], ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction hosting( $purchase, $account, $bandwidthAddons ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsAreaBackground_light ipsPad cNexusHosting ipsSpacer_bottom'>\n\t<div class='ipsGrid'>\n\t\t<div class='ipsGrid_span6'>\n\t\t\t<div class='ipsBox ipsPad'>\t\n\t\t\t\t<h2 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hosting_credentials', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t<br>\n\t\t\t\t<br>\n\n\t\t\t\t<h3 class='ipsType_sectionHead ipsType_normal ipsType_reset'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_server', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/h3>\t\n\t\t\t \t<p class='ipsType_medium ipsType_reset ipsSpacer_bottom'>\n\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $account->server->hostname, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n <span class='ipsType_light'>(IP: \nCONTENT;\n$return .= htmlspecialchars( $account->server->ip, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n)<\/span>\n\t\t\t\t<\/p>\n\n\t\t\t\t<h3 class='ipsType_sectionHead ipsType_normal ipsType_reset'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_username', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/h3>\t\n\t\t\t\t<p class='ipsType_medium ipsType_reset ipsType_monospace ipsSpacer_bottom'>\n\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $account->username, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/p>\n\n\t\t\t\t<h3 class='ipsType_sectionHead ipsType_normal ipsType_reset'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_password', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/h3>\t\n\t\t\t\t<p class='ipsType_medium ipsType_reset'>\n\t\t\t\t\t<span class='ipsType_monospace'>\nCONTENT;\n$return .= htmlspecialchars( $account->password, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t<\/p>\n\n\t\t\t\t<hr class='ipsHr'>\n\n\t\t\t\t<ul class='ipsGrid ipsSpacer_top'>\n\t\t\t\t\t<li class='ipsGrid_span6'>\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $account->ftpLink(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_primary ipsButton_verySmall ipsButton_fullWidth'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_ftp', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class='ipsGrid_span6'>\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $account->controlPanelLink(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_primary ipsButton_verySmall ipsButton_fullWidth' target=\"_blank\" rel='noopener'>\nCONTENT;\n\n$val = \"account_{$account->server->type}_control_panel\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<div class='ipsGrid_span6'>\n\t\t\t<div class='ipsBox ipsPad ipsSpacer_bottom'>\n\t\t\t\t<h2 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hosting_usage', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t<br>\n\t\t\t\t<br>\n\n\t\t\t\t<h3 class='ipsType_sectionHead ipsType_normal ipsType_reset'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_diskspace_use', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/h3>\n\t\t\t\t\nCONTENT;\n\nif ( $diskspaceAllowance = $account->diskspaceAllowance() ):\n$return .= <<<CONTENT\n\t\n\t\t\t\t\t<div class=\"ipsProgressBar ipsSpacer_top ipsSpacer_half \nCONTENT;\n\nif ( (100\/$diskspaceAllowance*$account->diskspaceInUse()) >= 90 ):\n$return .= <<<CONTENT\nipsProgressBar_warning\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t<div class=\"ipsProgressBar_progress\" style=\"width: \nCONTENT;\n\n$return .= htmlspecialchars( 100\/$diskspaceAllowance*$account->diskspaceInUse(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n%\"><span>\nCONTENT;\n\n$return .= \\IPS\\Output\\Plugin\\Filesize::humanReadableFilesize( $account->diskspaceInUse() );\n$return .= <<<CONTENT\n \/ \nCONTENT;\n\n$return .= \\IPS\\Output\\Plugin\\Filesize::humanReadableFilesize( $diskspaceAllowance );\n$return .= <<<CONTENT\n<\/span><\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<p class='ipsType_reset'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Output\\Plugin\\Filesize::humanReadableFilesize( $account->diskspaceInUse() );\n$return .= <<<CONTENT\n \/ \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'unlimited', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/p>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<br>\n\n\t\t\t\t<h3 class='ipsType_sectionHead ipsType_normal ipsType_reset'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_bandwidth_use', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/h3>\n\t\t\t\t\nCONTENT;\n\nif ( $monthlyBandwidthAllowance = $account->monthlyBandwidthAllowance() ):\n$return .= <<<CONTENT\n\t\n\t\t\t\t\t<div class=\"ipsProgressBar ipsSpacer_top ipsSpacer_half \nCONTENT;\n\nif ( (100\/$monthlyBandwidthAllowance*$account->bandwidthUsedThisMonth()) >= 90 ):\n$return .= <<<CONTENT\nipsProgressBar_warning\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t<div class=\"ipsProgressBar_progress\" style=\"width: \nCONTENT;\n\n$return .= htmlspecialchars( 100\/$monthlyBandwidthAllowance*$account->bandwidthUsedThisMonth(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n%\"><span>\nCONTENT;\n\n$return .= \\IPS\\Output\\Plugin\\Filesize::humanReadableFilesize( $account->bandwidthUsedThisMonth() );\n$return .= <<<CONTENT\n \/ \nCONTENT;\n\n$return .= \\IPS\\Output\\Plugin\\Filesize::humanReadableFilesize( $monthlyBandwidthAllowance );\n$return .= <<<CONTENT\n<\/span><\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nif ( \\count( $bandwidthAddons ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<ul class='ipsType_reset ipsSpacer_both ipsSpacer_half'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $bandwidthAddons as $addon ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'nexus', 'payments', 'invoices_manage' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $addon->original_invoice->acpUrl(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$sprintf = array(\\IPS\\Output\\Plugin\\Filesize::humanReadableFilesize( $addon->extra['bwAmount'] * 1000000, TRUE )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'extra_bandwidth_purchased', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n \nCONTENT;\n\n$val = ( $addon->start instanceof \\IPS\\DateTime ) ? $addon->start : \\IPS\\DateTime::ts( $addon->start );$return .= $val->html();\n$return .= <<<CONTENT\n<\/a>. \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ps_expire', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n: \nCONTENT;\n\n$val = ( $addon->expire instanceof \\IPS\\DateTime ) ? $addon->expire : \\IPS\\DateTime::ts( $addon->expire );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array(\\IPS\\Output\\Plugin\\Filesize::humanReadableFilesize( $addon->extra['bwAmount'] * 1000000, TRUE )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'extra_bandwidth_purchased', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n \nCONTENT;\n\n$val = ( $addon->start instanceof \\IPS\\DateTime ) ? $addon->start : \\IPS\\DateTime::ts( $addon->start );$return .= $val->html();\n$return .= <<<CONTENT\n.\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'nexus', 'customers', 'purchases_delete' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $addon->acpUrl()->setQueryString( array( 'do' => 'delete', 'r' => 'p' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'cancel_type_cancel', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<p class='ipsType_reset ipsSpacer_top ipsSpacer_half'>\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $purchase->acpUrl()->setQueryString( array( 'do' => 'extra', 'act' => 'bandwidth' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-ipsDialog data-ipsDialog-title=\"Generate Bandwidth Purchase Invoice\" class='ipsButton ipsButton_light ipsButton_verySmall'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'generate_bandwidth_invoice', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/p>\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<p class='ipsType_reset'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Output\\Plugin\\Filesize::humanReadableFilesize( $account->bandwidthUsedThisMonth() );\n$return .= <<<CONTENT\n \/ \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'unlimited', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/p>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<p class='ipsType_center ipsType_normal'>\n\t\t\t<strong><a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::external( 'http:\/\/' . $account->domain )->makeSafeForAcp(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" target=\"_blank\" rel='noopener'>\nCONTENT;\n$return .= htmlspecialchars( $account->domain, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a> <i class='fa fa-external-link'><\/i><\/strong>\n\t\t<\/p>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction hostingNoConnect( $purchase, $account ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $account ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( !$account->exists ):\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsMessage ipsMessage_warning\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hosting_account_terminated', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/div>\n\n\t\t<div class='ipsAreaBackground_light ipsPad cNexusHosting'>\n\t\t\t<div class='ipsBox ipsPad'>\t\n\t\t\t\t<h2 class='ipsType_sectionHead'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hosting_credentials', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t\t<br><br>\n\t\t\t\t<h3 class='ipsType_sectionHead ipsType_normal ipsType_reset'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_server', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/h3>\t\n\t\t\t \t<p class='ipsType_medium ipsType_reset ipsSpacer_bottom'>\n\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $account->server->hostname, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n <span class='ipsType_light'>(IP: \nCONTENT;\n$return .= htmlspecialchars( $account->server->ip, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n)<\/span>\n\t\t\t\t<\/p>\n\t\t\t\t<h3 class='ipsType_sectionHead ipsType_normal ipsType_reset'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_username', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/h3>\t\n\t\t\t\t<p class='ipsType_medium ipsType_reset ipsType_monospace ipsSpacer_bottom'>\n\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $account->username, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t<\/p>\n\t\t\t\t<h3 class='ipsType_sectionHead ipsType_normal ipsType_reset'><strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_password', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/h3>\t\n\t\t\t\t<p class='ipsType_medium ipsType_reset'>\n\t\t\t\t\t<span class='ipsType_monospace'>\nCONTENT;\n$return .= htmlspecialchars( $account->password, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t<\/p>\n\t\t\t\t<hr class='ipsHr'>\n\t\t\t\t<ul class='ipsGrid ipsSpacer_top'>\n\t\t\t\t\t<li class='ipsGrid_span6'>\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $account->ftpLink(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_primary ipsButton_verySmall ipsButton_fullWidth'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_ftp', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t<li class='ipsGrid_span6'>\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $account->controlPanelLink(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_primary ipsButton_verySmall ipsButton_fullWidth' target=\"_blank\" rel='noopener'>\nCONTENT;\n\n$val = \"account_{$account->server->type}_control_panel\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t\t<p class='ipsType_center ipsType_normal'>\n\t\t\t\t<strong><a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::external( 'http:\/\/' . $account->domain )->makeSafeForAcp(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" target=\"_blank\" rel='noopener'>\nCONTENT;\n$return .= htmlspecialchars( $account->domain, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a> <i class='fa fa-external-link'><\/i><\/strong>\n\t\t\t<\/p>\n\t\t<\/div>\n\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t<div class=\"ipsMessage ipsMessage_error\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hosting_fetch_error', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/div>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction hostingSupport( $purchase, $account ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<tr class='cNexusSupportHeader_row'>\n\t<td class='cNexusSupportHeader_colTitle'>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'hosting_info', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/td>\n\t<td class='cNexusSupportHeader_colInfo'>\n\t\t<ul class='ipsList_inline'>\n\t\t\t<li>\n\t\t\t\t<i class='fa fa-globe'><\/i> &nbsp;<a href=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Http\\Url::external( 'http:\/\/' . $account->domain )->makeSafeForAcp(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" target=\"_blank\" rel='noopener'>\nCONTENT;\n$return .= htmlspecialchars( $account->domain, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<i class='fa fa-server'><\/i> &nbsp;\nCONTENT;\n$return .= htmlspecialchars( $account->server->hostname, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<i class='fa fa-lock'><\/i> &nbsp;<span class=\"ipsType_monospace\">\nCONTENT;\n$return .= htmlspecialchars( $account->username, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span> \/ <span class=\"ipsType_monospace\">\nCONTENT;\n$return .= htmlspecialchars( $account->password, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $account->ftpLink(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'account_ftp', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a> \/ <a href=\"\nCONTENT;\n$return .= htmlspecialchars( $account->controlPanelLink(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" target=\"_blank\" rel='noopener'>\nCONTENT;\n\n$val = \"account_{$account->server->type}_control_panel\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t<\/td>\n<\/tr>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction hovercard( $purchase ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class=\"ipsPageHead_special\">\n\t\nCONTENT;\n$return .= htmlspecialchars( $purchase->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n (#\nCONTENT;\n$return .= htmlspecialchars( $purchase->id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n)\n<\/div>\n<ul class=\"ipsDataList\">\n\t\nCONTENT;\n\nforeach ( $purchase->custom_fields as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $displayValue = trim( \\IPS\\nexus\\Package\\CustomField::load( $k )->displayValue( $v, TRUE ) ) ):\n$return .= <<<CONTENT\n\n\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_span6\"><strong>\nCONTENT;\n\n$val = \"nexus_pfield_{$k}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong><\/span>\n\t\t\t\t<span class=\"ipsDataItem_generic\">{$displayValue}<\/span>\n\t\t\t<\/li>\t\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/ul>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction link( $purchase, $number=FALSE, $icon=FALSE, $shortName=FALSE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $icon ):\n$return .= <<<CONTENT\n<i class=\"fa fa-archive\"><\/i> \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<a href='\nCONTENT;\n$return .= htmlspecialchars( $purchase->acpUrl(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-ipsHover data-ipsHover-target=\"\nCONTENT;\n$return .= htmlspecialchars( $purchase->acpUrl()->setQueryString( 'hovercard', 1 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n\nif ( $number ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array($purchase->id); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_number', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelseif ( $shortName ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $purchase->_name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $purchase->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/a>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction lkey( $licensekey ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsPad ipsAreaBackground_light ipsType_center ipsSpacer_bottom'>\n\t<h2 class='ipsType_minorHeading ipsSpacer_bottom ipsSpacer_half'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'license_key', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t<div class='ipsType_large ipsType_monospace cNexusLicenseKey ipsSpacer_bottom ipsSpacer_half'>\n\t\t\nCONTENT;\n$return .= htmlspecialchars( $licensekey->key, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t<\/div>\n\t\nCONTENT;\n\nif ( $licensekey->max_uses != 0 ):\n$return .= <<<CONTENT\n\n\t\t<strong>\n\t\t\t\nCONTENT;\n\nif ( $licensekey->max_uses == -1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$sprintf = array($licensekey->uses); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'lkey_using_x_of_unlimited_uses', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$sprintf = array($licensekey->uses, $licensekey->max_uses); $pluralize = array( $licensekey->max_uses ); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'lkey_using_x_of_x_uses', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf, 'pluralize' => $pluralize ) );\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/strong>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'nexus', 'customers', 'lkeys_reset' ) || $licensekey->uses ):\n$return .= <<<CONTENT\n\n\t\t<ul class='ipsList_inline ipsSpacer_top'>\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'nexus', 'customers', 'lkeys_reset' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $licensekey->purchase->acpUrl()->setQueryString( array( 'do' => 'extra', 'act' => 'lkeyReset' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm class=\"ipsButton ipsButton_light ipsButton_verySmall\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'generate_new_key', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $licensekey->uses ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href='#elLicenseUses' class='ipsButton ipsButton_verySmall ipsButton_light' data-ipsDialog data-ipsDialog-content='#elLicenseUses' data-ipsDialog-title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'license_key_uses', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'see_license_usage', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\n\n\nCONTENT;\n\nif ( $licensekey->uses ):\n$return .= <<<CONTENT\n\n\t<div id='elLicenseUses' class='ipsHide ipsPad'>\n\t\t<ul class='ipsDataList'>\n\t\t\t\nCONTENT;\n\nforeach ( $licensekey->activate_data as $k => $use ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='ipsDataItem'>\n\t\t\t\t\t<div class='ipsDataItem_icon'>\n\t\t\t\t\t\t<span class='ipsBadge ipsBadge_icon ipsBadge_neutral'>\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class='ipsDataItem_main ipsType_normal'>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( \\count( $use['extra'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<ul class='ipsList_reset'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $use['extra'] as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<strong>\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n:<\/strong> \nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsDataItem_meta ipsType_medium ipsType_light'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $use['last_checked'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\DateTime::ts( $use['activated'] )->html(), htmlspecialchars( $use['ip'], ENT_DISALLOWED, 'UTF-8', FALSE ), \\IPS\\DateTime::ts( $use['last_checked'] )->html()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'lkey_use_info', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(\\IPS\\DateTime::ts( $use['activated'] )->html(), htmlspecialchars( $use['ip'], ENT_DISALLOWED, 'UTF-8', FALSE )); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'lkey_use_info_nocheck', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/div>\t\t\t\t\t\t\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t<\/div>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction noLkey( $purchase ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsPad ipsAreaBackground_light ipsType_center ipsSpacer_bottom'>\n\t<h2 class='ipsType_minorHeading ipsSpacer_bottom ipsSpacer_half'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'license_key', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t<div class='ipsType_large ipsSpacer_bottom ipsSpacer_half'>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'no_license_key_generated', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t<\/div>\n\n\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'nexus', 'customers', 'lkeys_reset' ) || $licensekey->uses ):\n$return .= <<<CONTENT\n\n\t\t<ul class='ipsList_inline ipsSpacer_top'>\n\t\t\t\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->hasAcpRestriction( 'nexus', 'customers', 'lkeys_reset' ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $purchase->acpUrl()->setQueryString( array( 'do' => 'extra', 'act' => 'lkeyReset' ) ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-confirm class=\"ipsButton ipsButton_light ipsButton_verySmall\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'generate_new_key', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction view( $purchase, $customer, $children, $invoices, $customFields ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $billingAgreement = $purchase->billing_agreement AND !$purchase->billing_agreement->canceled ):\n$return .= <<<CONTENT\n\n\t<p class=\"ipsMessage ipsMessage_info\">\nCONTENT;\n\n$sprintf = array($billingAgreement->acpUrl()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'billing_agreement_purchase_info', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/p>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<div class=\"ipsGrid\">\n\t<div class='ipsGrid_span4'>\t\t\n\t\t\nCONTENT;\n\nif ( $purchase->cancelled ):\n$return .= <<<CONTENT\n\n\t\t\t<p class='ipsAreaBackground_negative ipsPad ipsType_center ipsSpacer_bottom ipsSpacer_double ipsType_reset'>\n\t\t\t\t<span class='ipsType_reset ipsType_sectionHead'><i class='fa fa-times-circle'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_canceled', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t<br>\n\t\t\t\t\nCONTENT;\n\nif ( $purchase->can_reactivate ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_canceled_ra', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_canceled_no_ra', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/p>\n\t\t\nCONTENT;\n\nelseif ( !$purchase->active ):\n$return .= <<<CONTENT\n\n\t\t\t<p class='ipsAreaBackground ipsPad ipsType_center ipsSpacer_bottom ipsSpacer_double ipsType_reset'>\n\t\t\t\t<span class='ipsType_reset ipsType_sectionHead'><i class='fa fa-exclamation-circle'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_expired', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t<\/p>\n\t\t\nCONTENT;\n\nelseif ( $purchase->expire ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $purchase->grace_period and $purchase->expire->getTimestamp() < time() ):\n$return .= <<<CONTENT\n\n\t\t\t\t<p class='ipsAreaBackground ipsPad ipsType_center ipsSpacer_bottom ipsSpacer_double ipsType_reset'>\n\t\t\t\t\t<span class='ipsType_reset ipsType_sectionHead'><i class='fa fa-clock-o'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_in_grace_period', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t<\/p>\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t<p class='ipsAreaBackground_positive ipsPad ipsType_center ipsSpacer_bottom ipsSpacer_double ipsType_reset'>\n\t\t\t\t\t<span class='ipsType_reset ipsType_sectionHead'><i class='fa fa-check-circle'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_active', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t<\/p>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t<h2 class='ipsBox_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_details', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t<div class=\"ipsBox\">\n\t\t\t<ul class=\"ipsDataList\">\n\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size4\">\n\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ps_start', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t<\/span>\n\t\t\t\t\t<span class=\"ipsDataItem_generic\">\n\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $purchase->start->localeDate(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nif ( $purchase->expire ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size4\">\n\t\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ps_expire', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<span class=\"ipsDataItem_generic\">\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $purchase->expire->localeDate(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $purchase->grace_period ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size4\">\n\t\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'p_grace_period', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<span class=\"ipsDataItem_generic\">\n\t\t\t\t\t\t\t\nCONTENT;\n\n$grace = new \\DateInterval( 'PT' . $purchase->grace_period . 'S' );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\DateTime::formatInterval( \\IPS\\DateTime::create()->diff( \\IPS\\DateTime::create()->add( $grace ) ), 0 ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $purchase->expire ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<span class=\"ipsType_light ipsType_small\">\nCONTENT;\n$return .= htmlspecialchars( $purchase->expire->add( $grace )->localeDate(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $purchase->renewals ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size4\">\n\t\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ps_renewals', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<span class=\"ipsDataItem_generic\">\n\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $purchase->renewals, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $purchase->renewals->tax ):\n$return .= <<<CONTENT\n\nCONTENT;\n\n$sprintf = array($purchase->renewals->tax->_title); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'plus_tax_rate', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $purchase->grouped_renewals ):\n$return .= <<<CONTENT\n(\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_grouped', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n)\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $purchase->pay_to and $purchase->commission < 100 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $purchase->fee ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(100 - $purchase->commission, $purchase->fee, $purchase->pay_to->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_renewal_commission_fee', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$htmlsprintf = array(100 - $purchase->commission, $purchase->pay_to->link()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_renewal_commission', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'htmlsprintf' => $htmlsprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nif ( $purchase->billing_agreement ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size4\">\n\t\t\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ps_billing_agreement', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t<span class=\"ipsDataItem_generic\">\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $purchase->billing_agreement->acpUrl(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $purchase->billing_agreement->gw_id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $purchase->billing_agreement->canceled ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t(\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'billing_agreement_canceled', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n)\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $parent = $purchase->parent() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size4\">\n\t\t\t\t\t\t\t<strong>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'ps_parent', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<span class=\"ipsDataItem_generic\">\n\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $parent->acpUrl(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $parent->name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/div>\n\t\t<br>\n\t\t\n\t\t<h2 class=\"ipsBox_title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_customer_info', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t<div class=\"ipsBox\">\n\t\t\t\nCONTENT;\n\nif ( $customer ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsPad ipsPhotoPanel ipsPhotoPanel_small ipsClearfix'>\n\t\t\t\t\t<a href=\"\nCONTENT;\n$return .= htmlspecialchars( $purchase->member->acpUrl(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" class='ipsPos_left'><img src='\nCONTENT;\n$return .= htmlspecialchars( $purchase->member->photo, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsUserPhoto ipsUserPhoto_small'><\/a>\n\t\t\t\t\t<div class='ipsType_normal'>\n\t\t\t\t\t\t<h3 class='ipsType_large ipsType_reset ipsType_blendLinks'><strong><a href=\"\nCONTENT;\n$return .= htmlspecialchars( $purchase->member->acpUrl(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $purchase->member->cm_name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a><\/strong><\/h3>\n\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $purchase->member->email, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<br>\n\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($purchase->member->joined->localeDate()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'transaction_customer_since', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<br>\n\t\t\t\t\t\t\nCONTENT;\n\n$sprintf = array($purchase->member->totalSpent()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'transaction_spent', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsPad ipsClearfix'>\n\t\t\t\t\t<p class=\"ipsMessage ipsMessage_error\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'purchase_no_member', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t\t<br><br>\n\t<\/div>\n\t<div class='ipsGrid_span8'>\n\t\t\nCONTENT;\n\nif ( $content = $purchase->acpPage() ):\n$return .= <<<CONTENT\n\n\t\t\t{$content}\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\n\t\t\nCONTENT;\n\nif ( \\count( $customFields ) ):\n$return .= <<<CONTENT\n\n\t\t\t<h2 class='ipsBox_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'p_custom_fields', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t<div class=\"ipsBox\">\n\t\t\t\t<ul class=\"ipsDataList\">\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $customFields as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsDataItem\">\n\t\t\t\t\t\t\t<span class=\"ipsDataItem_generic ipsDataItem_size4\">\n\t\t\t\t\t\t\t\t<strong>\nCONTENT;\n\n$val = \"nexus_pfield_{$k}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t\t<span class=\"ipsDataItem_generic\">\n\t\t\t\t\t\t\t\t{$v}\n\t\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\n\t\t\nCONTENT;\n\nif ( $purchase->childrenCount() ):\n$return .= <<<CONTENT\n\n\t\t\t<h2 class=\"ipsBox_title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'child_purchases', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t\t\t{$children}\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\n\t\t{$invoices}\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
